{
  "name": "tmodjs",
  "version": "1.0.1-rc9",
  "readmeFilename": "README.md",
  "description": "Template Compiler",
  "homepage": "https://github.com/aui/tmodjs",
  "keywords": [
    "template",
    "artTemplate",
    "TemplateJS",
    "CommonJS",
    "RequireJS",
    "SeaJS",
    "AMD",
    "CMD"
  ],
  "author": {
    "name": "aui"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/aui/tmodjs.git"
  },
  "main": "./src/tmod.js",
  "bin": {
    "tmod": "./bin/tmod",
    "tmodjs": "./bin/tmod"
  },
  "scripts": {
    "test": "tmod ./test/tpl",
    "test2": "tmod ./test/test-all/*"
  },
  "dependencies": {
    "art-template": "3.0.x",
    "uglify-js": "2.4.0",
    "semver": "2.3.0"
  },
  "license": "BSD",
  "readme": "#\tTmodJS\n\nTmodJS（原名 atc）是一个简单易用的前端模板预编译工具。它通过预编译技术让前端模板突破浏览器限制，实现后端模板一样的同步“文件”加载能力。它采用目录来组织维护前端模板，从而让前端模板实现工程化管理，最终保证前端模板在复杂单页 web 应用下的可维护性。同时预编译输出的代码经过多层优化，能够在最大程度节省客户端资源消耗。\n\n一、**按文件与目录组织模板**\n\n```\ntemplate('tpl/home/main', data)\n```\n\n二、**模板支持引入子模板**\n\n```\n{{include '../public/header'}}\n```\n\nTmodJS 一经启动，就无需人工干预，每次模板创建与更新都会自动编译，引入一个 js 即可使用``template(path)``接口调用本地模板文件，直到正式上线都无需对代码进行任何修改，整个过程简单自然。\n\n##\t所有特性\n\n0.\t编译模板为不依赖引擎的 js 文件\n1.\t前端模板按文件与目录组织\n3.\t模板之间支持引入外部模板\n4.\t使用同步模板加载接口\n5.\t可选多种规范的模块输出：AMD、CMD、CommonJS\n6.\t支持作为 GruntJS 的插件构建项目\n7.\t模板目录可被前后端共享\n8.\t支持检测修改即时编译\n9.\t支持模板运行时调试\n10.\t配置文件支持多人共享\n\n若想深入了解，请阅读：《[进击！前端模板工程化](https://github.com/aui/tmodjs/blob/master/doc/why-tmodjs.md)》\n\n##\t文档目录\n\n*\t[安装](#安装)\n*\t[编写模板](#编写模板)\n*\t[编译模板](#编译模板)\n*\t[使用模板](#使用模板)\n*\t[演示](#演示)\n*\t[配置](#配置)\n*\t[grunt](#grunt)\n*\t[gulp](#gulp)\n*\t[常见问题](#常见问题)\n*\t[更新日志](#更新日志)\n*\t[加入我们](#加入我们)\n*\t[授权协议](#授权协议)\n\n##\t安装\n\n使用 [NodeJS](http://nodejs.org) 附带的``npm``命令，执行：\n\n```\nnpm install -g tmodjs\n```\t\n\n> Mac OSX 可能需要管理员权限运行： ``sudo npm install -g tmodjs``\n\n##\t编写模板\n\nTmodJS 的前端模板不再耦合在业务页面中，而是和后端模板一样有专门的目录管理。目录名称只支持英文、数字、下划线的组合，一个模板对应一个``.html``文件。\n\n支持基本的模板语法，如输出变量、条件判断、循环、包含子模板。[模板语法参考](https://github.com/aui/tmodjs/wiki/模板语法)\n\n> 完全支持 [artTemplate](https://github.com/aui/artTemplate) 的语法\n\n##\t编译模板\n\n只需要运行``tmod``这个命令即可，默认配置参数可以满足绝大多数项目。\n\n```\ntmod [模板目录] [配置参数]\n```\n\n模板目录必须是模板的根目录，若无参数则为默认使用当前工作目录，tmodjs 会监控模板目录修改，每次模板修改都会增量编译。\n\n###\t配置参数\n            \n*\t``--debug``\t\t\t输出调试版本\n*\t``--charset value`` 定义模板编码，默认``utf-8``\n*\t``--output value``  定义输出目录，默认``./build``\n*\t``--type value``\t定义输出模块格式，默认``default``，可选``cmd``、``amd``、``commonjs``\n*\t``--no-watch``\t\t关闭模板目录监控\n*\t``--version``\t\t显示版本号\n*\t``--help``\t\t\t显示帮助信息\n\n配置参数将会保存在模板目录[配置文件](#配置)中，下次运行无需输入配置参数（``--no-watch`` 与 ``--debug`` 除外）。\n\n####\t示例\n\n```\ntmod ./tpl --output ./build\n```\n\n##\t使用模板\n\n根据编译的``type``的配置不同，会有两种不同使用方式：\n\n###\t使用默认的格式\n\nTmodJS 默认将整个目录的模板压缩打包到一个名为 template.js 的脚本中，可直接在页面中使用它：\n\n\t<script src=\"tpl/build/template.js\"></script>\n\t<script>\n\t\tvar html = template('news/list', _list);\n\t\tdocument.getElementById('list').innerHTML = html;\n\t</script>\n\n> template.js 还支持 RequireJS、SeaJS、NodeJS 加载。[示例](http://aui.github.io/tmodjs/test/index.html)\n\n###\t指定格式（amd / cmd / commonjs)\n\n此时每个模板就是一个单独的模块，无需引用 template.js：\n\n```\nvar render = require('./tpl/build/news/list');\nvar html = render(_list);\n```\n\n>\t注意：模板路径不能包含模板后缀名\n\n##\t演示\n\n[TmodJS 源码包](https://github.com/aui/tmodjs/archive/master.zip)中``test/tpl``是一个演示项目的前端模板目录，基于默认配置。切换到源码目录后，编译：\n\n```\ntmod test/tpl\n```\n\n编译完毕后你可以在浏览器中打开 [test/index.html](http://aui.github.io/tmodjs/test/index.html) 查看如何使用编译后的模板。\n\n##\t配置\n\nTmodJS 的项目配置文件保存在模板目录的 package.json 文件中：\n\n```\n{\n    \"name\": \"template\",\n    \"version\": \"1.0.0\",\n    \"dependencies\": {\n        \"tmodjs\": \"1.0.0\"\n    },\n    \"tmodjs-config\": {\n        \"output\": \"./build\",\n        \"charset\": \"utf-8\",\n        \"syntax\": \"simple\",\n        \"helpers\": null,\n        \"escape\": true,\n        \"compress\": true,\n        \"type\": \"default\",\n        \"runtime\": \"template.js\",\n        \"combo\": true,\n        \"minify\": true,\n        \"cache\": false\n    }\n}\n```\n\n字段 | 类型 | 默认值| 说明\n------------ | ------------- | ------------ | ------------\noutput | String | ``\"./build\"`` | 编译输出目录设置\ncharset | String | ``\"utf-8\"`` | 模板使用的编码（暂时只支持 utf-8）\nsyntax | String | ``\"simple\"`` | 定义模板采用哪种语法。可选：``simple``、``native``\nhelpers | String | ``null`` | 自定义辅助方法路径\nescape | Boolean | ``true`` | 是否过滤 XSS。如果后台给出的数据已经进行了 XSS 过滤，就可以关闭模板的过滤以提升模板渲染效率\ncompress | Boolean | ``true`` | 是否压缩 HTML 多余空白字符\ntype | String | ``\"default\"`` |  输出的模块类型，可选：``default``、``cmd``、``amd``、``commonjs``\nruntime | String | ``\"template.js\"`` | 设置输出的运行时名称\nalias | String | ``null`` | 设置模块依赖的运行时路径（仅针对于非``default``的类型模块配置字段。如果不指定模块内部会自动使用相对 runtime 的路径）\ncombo | Boolean | ``true`` | 是否合并模板（仅针对于 default 类型的模块）\nminify | Boolean | ``true`` | 是否输出为压缩的格式\ncache | Boolean | ``true`` | 是否开启编译缓存\n\t\n##\tgrunt\n\n让 TmodJS 作为 Grunt 的一个插件使用：\n\n```\nnpm install grunt-tmod --save-dev\n```\n\n由[@Jsonzhang](https://github.com/Jsonzhang)开发，项目主页：\n\n<https://github.com/Jsonzhang/grunt-tmod>\n\n## gulp\n\n让 TmodJS 作为 Gulp 的一个插件使用：\n\n```\nnpm install gulp-tmod --save-dev\n```\n\n由[@lichunqiang](https://github.com/lichunqiang)开发，项目主页：\n\n<https://github.com/lichunqiang/gulp-tmod>\n\n##\t常见问题\n\n**问**：TmodJS 需要部署到服务器中吗？\n\n> 不需要，这是本地工具，基于 NodeJS 编写是为了实现跨平台。\n\n**问**：如何将每个模板都编译成单独的 amd/cmd 模块输出？\n\n> 指定 type 参数即可，如``--type cmd``则可以让每个模板都支持 RequireJS/SeaJS 调用。\n\n**问**：如何将模板编译成 NodeJS 的模块？\n\n> 指定 type 参数即可，如``--type commonjs``。\n\n**问**：线上运行的模板报错了如何调试？\n\n> 开启 debug 模式编译，如``--debug``，这样会输出调试版本，可以让你快速找到模板运行错误的语句以及数据。\n\n**问**：如何不压缩输出 js？\n\n> 编辑配置文件，设置``\"minify\": false``。\n\n**问**：如何修改默认的输出目录？\n\n> 指定 output 参数即可，如``--output ../../build``。\n\n**问**：如何让模板访问全局变量？\n\n> 请参考：[辅助方法](https://github.com/aui/tmodjs/wiki/辅助方法)。\n\n**问**：可以使用使用类似 tmpl 那种的 js 原生语法作为模板语法吗？\n\n> 可以。编辑配置文件，设置``\"syntax\": \"native\"``即可，目前 TmodJS 默认使用的是 simple 语法。\n\n**问**：如何兼容旧版本 atc 的项目？\n\n> 编辑配置文件，分别设置``\"type\": \"cmd\"``、``\"syntax\": \"native\"``、``\"output\": \"./\"``\n\n**问**：如何迁移原来写在页面中的 artTemplate 模板，改为 TmodJS 这种按按文件存放的方式？\n\n> 请参考：[页面中的模板迁移指南](https://github.com/aui/tmodjs/wiki/页面中的模板迁移指南)。\n\n**问**：我需要手动合并模板，如何让 tmodjs 不合并输出？\n\n> 编辑配置文件，设置``combo:false``。\n\n##\t更新日志\n\n### v1.0.1\n\n*   解决新版本设置``\"minify\":true``输出后，输出的脚本中文没有被编码的问题\n*   给引入后缀名的模板给予报错提示\n\n###\tv1.0.0\n\n*\t使用 artTemplate3.0 作为模板引擎，NodJS 可直接共享前端的模板目录的模板，无需预编译\n*\t提供 GruntJS 插件\n*\t取消``engine``配置\n*\t增加``runtime``配置\n*\t接口重构，支持多实例\n\n###\tv0.1.1\n\n*\t给压缩打包合并后的每条模板增加版本标记，例如``/*v:13*/``，以便对比线上版本\n\n###\tv0.1.0\n\n*\t增加自动递增的模板版本号，控制台可显示模板被修改的次数\n*\t优化默认设置下的文件输出，仅保留``template.js``，临时文件使用隐藏的``.cache``目录存放\n*\t自动清理``.debug.js``文件\n*\t对非规范的``include``语句模板在编译过程给予提示\n*\t修复``compileError``事件触发异常的 bug\n*\t减少对磁盘的读写，优化性能\n\n###\tv0.0.4\n\n*\t增加``escape``配置，如果后台给出的数据已经进行了 XSS 过滤，就可以关闭模板的默认过滤以提升模板渲染效率\n*\t简化``combo``功能，default只提供全部合并与不合并两个选项，值为布尔类型（兼容旧的版本的配置，会自动转换成布尔类型）\n*\t取消鸡肋的异步载入插件，同时``async``配置失效\n*\t为了便于理解，命令行输入的``--output``参数不再相对于模板目录，而是工作目录（配置文件的``output``参数仍保持不变）\n*\t优化控制台日志显示\n\n###\tv0.0.3\n\n*\t修复``combo``配置不能为空数组的 BUG\n*\t支持页面内嵌动态编译与预编译两种方案共存（请设置``engine:true``，并在页面中中引入 TmodJS 输出的 template.js。如果想让 template.js 不内置合并的模板，可以设置``combo:[]``）\n*\t运行时性能优化\n*\t增加``alias``配置字段，在 AMD 与 CMD 模式下可以指定运行时依赖 ID\n\n###\tv0.0.2\n\n修复极其特殊情况下 TmodJS 无法为 AMD/CMD 模块正确声明依赖的问题[#14](https://github.com/aui/tmodjs/issues/14)\n\n###\tv0.0.1\n\n这是一个革命性的版本，内部大量优化！同时项目更名为 **TmodJS**，内部版本号收归到 0.0.1\n\n使用 TemplageJS 格式的模块作为默认输出的类型：它包含模板目录中所有模板，除了支持页面 Script 直接引入之外还支持 RequireJS、SeaJS、NodeJS 加载，并且接口统一，跨架构与前后端运行！\n\n详细更新列表：\n\n*\t吸收了来自业务的一些建议，编译方案的大调整，内部进行无数次优化，编译后的代码更小\n*\t编译后的脚本使用统一的接口：``template(path, data)`` 其中 path 相对于 template.js 所在目录\n*\t自动打包目录与子目录的模板\n*\t可选支持异步载入模板功能\n*\t可选嵌入完整模板引擎（使用字符串存储模板）\n*\t可选支持 RequireJS/SeaJS/NodeJS 模块\n*\t保存模板配置文件（方便多人协作中使用版本管理工具共享配置）\n*\t可选编译调试版本\n*\t编译后的函数体优化\n*\t错误处理优化\n*\t``compile(file)``接口可递归编译依赖\n*\t增加``saveUserConfig``接口保存用户设置\n*\t默认语法变更：默认使用简洁语法，取消``--define-syntax``，并使用新的界定符 ``{{``与``}}``。[模板语法参考](https://github.com/aui/tmodjs/wiki/模板语法)\n*\t取消``--clone-helpers``参数\n\n###\tatc v1.0.3\n\n*\t默认使用简洁语法，取消--define-syntax，增加--no-define-syntax参数恢复原生语法\n*\t增加-t, --type设置输出的模块类型，默认 CMD ，可选：CMD | AMD | CommonJS。让模板可以前后端共用\n*\t优化无逻辑语句的模板编译后的函数体积\n*\t因 Windows 批处理无法模拟 NodeJS 的高级特性，atc 不再包含 Windows 批处理脚本，若需要可用批处理调用 NodeJS\n*\t模板语法的界定符有变更，请参考：模板语法\n\n###\tatc v1.0.2\n\nNodeJS 版本：\n\n*\t增加``-o path``或``--output path``定义输出目录\n*\t修复``-d``或``--define-syntax``可能失效的问题\n*\t修改``-w``或``--watch``参数启动后的规则：只监控模板修改，而不再编译所有模板\n*\t增强调试特性：模板语法错误将在控制台输出调试源码，并停止进程\n\n###\tatc v1.0.1\n\nNodeJS 版本：\n\n*\t支持监控目录，即时编译\n*\t使用命令行传递参数\n*\t使用 npm 管理包\n*\t支持设置简洁语法\n\n###\tatc v1.0.0\n\n*\t支持前端模板按文件与目录组织，自动处理 include 依赖\n*\tNodeJS 与 Windows 批处理版本同时发布\n\n##\t加入我们\n\nTmodJS 是一个开源项目，如果你喜欢，非常期待你通过微博或者博客等来宣传 TmodJS。\n\n###\t使用 TmodJS 的项目\n\n*\tQQ空间\n*\t腾讯视频\n*\t爱奇艺\n*\t爱拍原创\n*\tSpa（迅雷）\n*\tMicroTrend（腾讯）\n*\tTracker（腾讯）\n*\tUR（腾讯）\n*\t……\n\n如果你使用了 TmodJS 敬请留下项目名，我们将在 TmodJS 主页展示你的项目。[提交](https://github.com/aui/tmodjs/issues/1)\n\n###\t代码贡献名单\n\n*\t[@aui](https://github.com/aui)\n*\t[@Jsonzhang](https://github.com/Jsonzhang)（grunt 插件作者）\n*\t[@lichunqiang](https://github.com/lichunqiang)（gulp 插件作者）\n*\t[@TooBug](https://github.com/TooBug)\n*\t[@bammoo](https://github.com/bammoo)\n\n###\t特别感谢\n\n*\t[@warmhug](https://github.com/warmhug)（在工具雏形阶段的热心的测试与反馈）\n\n##\t授权协议\n\nBSD.\n",
  "bugs": {
    "url": "https://github.com/aui/tmodjs/issues"
  },
  "_id": "tmodjs@1.0.1-rc9",
  "_from": "tmodjs@*"
}
