"use strict";!function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd&&define([],b)}(this,function(){function a(a,b){b=b||{mode:0,duration:400},this._ol=a,this._lis=a.children,this._events={},this._isSliding=!1,this._index=1,this._config=g(b),this._aniOut=new window.Animate,this._aniIn=new window.Animate,this.isPaused=!1,h(this._config,this._ol),this._config.autoPlay!==!1&&this.play()}var b=function(a){return function(){for(var b,c=document.createElement("div").style,d=a.prefix.split(","),e=0,f=d.length;f>e;e++)if(b=d[e]+a.words,b in c)return d[e].substr(0,d[e].length-1);return!1}},c=function(a,b){var c=b();return""===c?a:(a=a.charAt(0)+a.substr(1),c+a)},d=b({prefix:"t,-webkit-t,-moz-t,-ms-t,-o-t",words:"ransform"}),e=d()===!1?!1:!0,f=c("transform",d),g=function(a){var b={};b.mode=a.mode||0,b.duration=a.duration||500,b.interval=a.interval||4e3,b.autoPlay=null!==a.autoPlay?a.autoPlay:!0,b.timingFunction=a.timingFunction||"linear",b.loop=null!=a.loop?a.loop:!0,b.nextSlideOffset=a.nextSlideOffset||.2,b.scale=a.scale||1;var c=a.origin||{},d=c.x||0,e=c.y||0;return b.origin={x:d,y:e},b},h=function(a,b){var c=b.children,d=b.clientWidth,e=b.clientHeight,g=0;if(a.mode<4){if(0===a.mode||1===a.mode){for(g=0;g<c.length;g++)c[g].style[f]="translateX("+g*d+"px) translateZ(0)",c[g].style.width=d+"px",c[g].style.height=b.style.height="100%";b.style.width=d*c.length+"px"}else{for(g=0;g<c.length;g++)c[g].style[f]="translateY("+g*e+"px) translateZ(0)",c[g].style.height=e+"px",c[g].style.width=b.style.width="100%";b.style.height=e*c.length+"px"}b.style[f]="translateZ(0)"}else{for(g=0;g<c.length;g++)c[g].removeAttribute("style");b.removeAttribute("style")}},i=a.prototype;return i.on=function(a,b){if(!/string/i.test(typeof a))throw new TypeError("event must be string");if(!/function/i.test(typeof b))throw new TypeError("callback must be a function");return this._events[a]||(this._events[a]=[]),this._events[a].push(b),this},i.off=function(a,b){if(!/string/i.test(typeof a))throw new TypeError("event must be string");if(/function/i.test(typeof b)){if(this._events[a]){var c=this._events[a].indexOf(b);c>-1&&this._events[a].splice(c,1)}}else this._events[a]=null;return this},i.changeConfig=function(a){return this.pause(),this._config=g(a),this._destroyStyle(),h(this._config,this._ol),this._index=1,this},i._destroyStyle=function(){this.pause(),this._aniIn.elem&&this._aniIn.clear().reset(),this._aniOut.elem&&this._aniOut.clear().reset();for(var a=0;a<this._lis.length;a++)this._lis[a].removeAttribute("style");return this._ol.removeAttribute("style"),this},i.destroy=function(){this._destroyStyle(),this.isPaused=!1,this.isDestroyed=!0;for(var a in this._events)this.off(a);return this._ol.removeEventListener("touchstart"),this._ol.removeEventListener("touchmove"),this._ol.removeEventListener("touchend"),this},i.prefixCSS=function(a,b){var c=b();return""===c?a:(a=a.charAt(0)+a.substr(1),c+a)},i.pause=function(){return window.clearInterval(this._intervalKey),this._intervalKey=null,this.isPaused=!0,this},i.play=function(){var a=this;return a._config.autoPlay&&(window.clearInterval(a._intervalKey),a._intervalKey=setInterval(function(){a.next()},a._config.interval+a._config.duration)),this.isPaused=!1,this},i.supportTransform=e,i.transformCSS=f,i.touchToSlide=function(){var a=!1,b=null,c=this,d=null,e=!1,f=null,g=0,h=!1,i=!1,j=function(){var e,j,k,l;if(f.changedTouches.length&&b){var m=f.changedTouches[0].clientX-b.x,n=f.changedTouches[0].clientY-b.y;if(0===c._config.mode||1===c._config.mode){if(d||(d=c._ol),d)if(k=d.children[0].clientWidth,e=d.children.length,j=c._index,m>0){if(1===j&&!c._config.loop)return void(a=!1);if(1===j){if(!h){for(g=0;e>g;g++)c._ol.children[g].style[c.transformCSS]="translateX("+k*g+"px) translateZ(0)";c._ol.children[e-1].style[c.transformCSS]="translateX("+-k+"px) translateZ(0)",h=!0}}else if(j===e&&!i){for(g=0;e>g;g++)c._ol.children[g].style[c.transformCSS]="translateX("+k*g+"px) translateZ(0)";i=!0}d.style[c.transformCSS]="translateX("+parseInt(k*(1-c._index)+m)+"px) translateZ(0)"}else if(0>m){if(j===e&&!c._config.loop)return void(a=!1);if(j===e){if(!i){for(g=0;e>g;g++)c._ol.children[g].style[c.transformCSS]="translateX("+k*g+"px) translateZ(0)";c._ol.children[0].style[c.transformCSS]="translateX("+k*e+"px) translateZ(0)"}}else if(1===j&&!h){for(g=0;e>g;g++)c._ol.children[g].style[c.transformCSS]="translateX("+k*g+"px) translateZ(0)";h=!0}d.style[c.transformCSS]="translateX("+parseInt(k*(1-c._index)+m)+"px) translateZ(0)"}}else if((2===c._config.mode||3===c._config.mode)&&(d||(d=c._ol),d))if(l=d.children[0].clientHeight,e=d.children.length,j=c._index,n>0){if(1===j&&!c._config.loop)return void(a=!1);if(1===j){if(!h){for(g=0;e>g;g++)c._ol.children[g].style[c.transformCSS]="translateY("+l*g+"px) translateZ(0)";c._ol.children[e-1].style[c.transformCSS]="translateY("+-l+"px) translateZ(0)",h=!0}}else if(j===e&&!i){for(g=0;e>g;g++)c._ol.children[g].style[c.transformCSS]="translateY("+l*g+"px) translateZ(0)";i=!0}d.style[c.transformCSS]="translateY("+parseInt(l*(1-c._index)+n)+"px) translateZ(0)"}else if(0>n){if(j===e&&!c._config.loop)return void(a=!1);if(j===e){if(!i){for(g=0;e>g;g++)c._ol.children[g].style[c.transformCSS]="translateY("+l*g+"px) translateZ(0)";c._ol.children[0].style[c.transformCSS]="translateY("+l*e+"px) translateZ(0)"}}else if(1===j&&!h){for(g=0;e>g;g++)c._ol.children[g].style[c.transformCSS]="translateY("+l*g+"px) translateZ(0)";h=!0}d.style[c.transformCSS]="translateY("+parseInt(l*(1-c._index)+n)+"px) translateZ(0)"}}},k=function(d){(0===c._config.mode||1===c._config.mode||2===c._config.mode||3===c._config.mode||5===c._config.mode||6===c._config.mode||7===c._config.mode||8===c._config.mode)&&(c._isSliding||(c.pause(),a=!0,b={x:d.changedTouches[0].clientX,y:d.changedTouches[0].clientY}),i=h=!1,d.preventDefault())},l=function(c){if(b&&a){if(f=c,!e){var d=function(){j(),e||(e=!0),b&&a?window.requestAnimationFrame(d):e=!1};d()}c.preventDefault()}},m=function(e){if(b&&a){if(d){var f=e.changedTouches[0].clientX-b.x,g=e.changedTouches[0].clientY-b.y,h=1,i=.5,j=0,k=0,l=!0,m=!0,n=!0,o=function(){clearTimeout(s),c._aniIn.reset(),d=null,c._isSliding=!1,c.play()},p=function(){c._aniIn.start({timing:c._config.timing}),c._isSliding=!0},q=function(a,b){var e=null,f=null;return e={point:0},e[c.transformCSS]=d.style[c.transformCSS],f={point:c._config.duration*a},f[c.transformCSS]=b,{frameIn:[e,f]}};c._aniIn.setElement(d),c._aniIn.clear();var r,s;c._config.loop||(c._index>=c._lis.length&&(l=!1),c._index<=1&&(m=!1)),0===c._config.mode||1===c._config.mode?(j=d.children[0].clientWidth,i=c._config.nextSlideOffset<1?j*c._config.nextSlideOffset:c._config.nextSlideOffset,0>f?(n=0===c._config.mode?l:m,Math.abs(f)>i?(h=(j-Math.abs(f))/j,r=q(h,"translateX("+j*-c._index+"px) translateZ(0)","translateX("+j*(1-c._index)+"px) translateZ(0)"),c._aniIn.keyframe(r.frameIn),p(),s=setTimeout(function(){c._index+=1,c._index>c._lis.length&&(c._index=c._config.loop?1:c._lis.length),o(),c._events.slideend&&c._events.slideend.forEach(function(a){a&&a(c._index,"prev")})},c._config.duration*h+80)):(h=Math.abs(f)/j,r=q(h,"translateX("+j*(1-c._index)+"px) translateZ(0)","translateX("+j*-c._index+"px) translateZ(0)"),c._aniIn.keyframe(r.frameIn),p(),s=setTimeout(function(){o()},c._config.duration*h+80))):f>0&&(n=1===c._config.mode?l:m,n&&Math.abs(f)>i?(h=(j-Math.abs(f))/j,r=q(h,"translateX("+j*(2-c._index)+"px) translateZ(0)","translateX("+j*(1-c._index)+"px) translateZ(0)"),c._aniIn.keyframe(r.frameIn),p(),s=setTimeout(function(){c._index-=1,c._index<1&&(c._index=c._config.loop?c._lis.length:1),o(),c._events.slideend&&c._events.slideend.forEach(function(a){a&&a(c._index,"prev")})},c._config.duration*h+80)):(h=Math.abs(f)/j,r=q(h,"translateX("+j*(1-c._index)+"px) translateZ(0)","translateX("+j*(2-c._index)+"px) translateZ(0)"),c._aniIn.keyframe(r.frameIn),p(),s=setTimeout(function(){o()},c._config.duration*h+80)))):(2===c._config.mode||3===c._config.mode)&&(k=d.children[0].clientHeight,i=c._config.nextSlideOffset<1?k*c._config.nextSlideOffset:c._config.nextSlideOffset,0>g?(n=2===c._config.mode?l:m,n&&Math.abs(g)>i?(h=(k-Math.abs(g))/k,r=q(h,"translateY("+k*-c._index+"px) translateZ(0)","translateY("+k*(1-c._index)+"px) translateZ(0)"),c._aniIn.keyframe(r.frameIn),p(),s=setTimeout(function(){c._index+=1,c._index>c._lis.length&&(c._index=c._config.loop?1:c._lis.length),o(),c._events.slideend&&c._events.slideend.forEach(function(a){a&&a(c._index,"prev")})},c._config.duration*h+80)):(h=Math.abs(g)/k,r=q(h,"translateY("+k*(1-c._index)+"px) translateZ(0)","translateY("+k*-c._index+"px) translateZ(0)"),c._aniIn.keyframe(r.frameIn),p(),s=setTimeout(function(){o()},c._config.duration*h+80))):g>0&&(n=3===c._config.mode?l:m,n&&Math.abs(g)>i?(h=(k-Math.abs(g))/k,r=q(h,"translateY("+k*(2-c._index)+"px) translateZ(0)","translateY("+k*(1-c._index)+"px) translateZ(0)"),c._aniIn.keyframe(r.frameIn),p(),s=setTimeout(function(){c._index-=1,c._index<1&&(c._index=c._config.loop?c._lis.length:1),o(),c._events.slideend&&c._events.slideend.forEach(function(a){a&&a(c._index,"prev")})},c._config.duration*h+80)):(h=Math.abs(g)/k,r=q(h,"translateY("+k*(1-c._index)+"px) translateZ(0)","translateY("+k*(2-c._index)+"px) translateZ(0)"),c._aniIn.keyframe(r.frameIn),p(),s=setTimeout(function(){o()},c._config.duration*h+80))))}a=!1,b=null}e.preventDefault()};return window.navigator.msPointerEnabled&&(this._ol.addEventListener("MSPointerDown",k,!1),this._ol.addEventListener("MSPointerMove",k,!1),this._ol.addEventListener("MSPointerUp",m,!1)),this._ol.addEventListener("touchstart",k),this._ol.addEventListener("touchmove",l),this._ol.addEventListener("touchend",m),this},a});