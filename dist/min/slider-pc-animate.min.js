"use strict";!function(a){var b=0,c=window.performance||{};Function.bind||(Function.prototype.bind=function(){var a=this,b=Array.prototype.slice.call(arguments),c=b.shift();return function(){return a.apply(c,b.concat(Array.prototype.slice.call(arguments)))}});var d=function(a){return function(){for(var b,c=document.createElement("div").style,d=a.prefix.split(","),e=0,f=d.length;f>e;e++)if(b=d[e]+a.words,b in c)return d[e].substr(0,d[e].length-1);return!1}},e=function(a,b){var c=b();return""===c?a:(a=a.charAt(0).toUpperCase()+a.substr(1),c+a)},f=function(a,b){var c=b();return""===c?a:(a=a.charAt(0)+a.substr(1),c+a)},g=d({prefix:"r,webkitR,MozR,msR,OR",words:"equestAnimationFrame"}),h=d({prefix:"t,webkitT,MozT,msT,OT",words:"ransform"}),i=d({prefix:"t,webkitT,MozT,msT,OT",words:"ransition"}),j=d({prefix:"a,webkitA,MozA,msA,OA",words:"nimation"}),k=d({prefix:"a,-webkit-a,-moz-a,-ms-a,-o-a",words:"nimation"}),l=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,function(){c.call(a,window.event)})},m=function(a,b){for(var c in b)a[c]=b[c];return a},n=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c,d=0;c=a[d];d++)if(c===b)return d;return-1},o=window[e("requestAnimationFrame",g)]||function(a){setTimeout(a,17)},d=document.createElement("style");d.setAttribute("id","ex_animate_style"),d.type="text/css",document.getElementsByTagName("head")[0].appendChild(d),d=function(){this._init.apply(this,arguments)},d.prototype={css:document.getElementById("ex_animate_style"),_keywords:["point","timing"],_events:[],_method:null,_currentFrame:0,_needStop:!1,_init:function(a,c){c=c||{},this.elem=a,this.options=m({},c),this.events={},this.keyframes=[],this.keyframesString=[],this.uniqId=++b;var d=document.createElement("div").style;e("transform",h);var f=e("transition",i),g=e("animation",j);f in d&&(this.options.transition=!0),g in d&&(this.options.animation=!0),this.options.animation&&(d=document.createTextNode(""),this.css.appendChild(d),this.keyframeElement=d)},setElement:function(a){return this.elem=a,this},_getProperty:function(a){var b,c={};for(b in a)-1==n(this._keywords,b)&&(c[b]=a[b]);return c},keyframe:function(a){return this.keyframes=this.keyframes.concat(a),this},resetKeyFrames:function(){return this.keyframes=[],this},reset:function(){return this.keyframes=[],this.elem.style[e("animation",j)]="",this.elem.style[e("transitionProperty",i)]="",this.elem.style[e("transitionTimingFunction",i)]="",this.elem.style[e("transitionDuration",i)]="",this},start:function(a){var b=this;this._startOpt=a=this._startOpt||m({timing:"linear"},a),null==this._startOpt.repeat&&(this._startOpt.repeat=1),this._startOpt.repeat*=1,this._startOpt.delay=this._startOpt.delay||"0s";var d=function(a){var b,c="{",d=0;for(b in a)0<d++&&(c+=";"),c=c+b+":"+a[b];return c+"}"};this._currentFrame=0;var g=function(){for(var c,g=this.keyframes[this.keyframes.length-1].point,h="key"+this.uniqId,i="{",m=0;c=this.keyframes[m];m++)i+=Math.round(c.point/g*100)+"% "+d(this._getProperty(c));i+="}",i="@"+f("keyframes",k)+" "+h+i,i!=this.keyframeElement.data&&(this.keyframeElement.data=i),this.elem.style[e("animation",j)]=h+" "+g+"ms "+a.timing;var n,g=this._getProperty(this.keyframes[this.keyframes.length-1]);for(n in g)this.elem.style[n]=g[n];this._startOpt.repeat&&(this.elem.style[e("animationIterationCount",j)]=this._startOpt.repeat),this._startOpt.delay&&(this.elem.style[e("animationDelay",j)]=this._startOpt.delay),this._startOpt.direction&&(this.elem.style[e("animationDirection",j)]=this._startOpt.direction),l(this.elem,e("animationEnd",j),function(a){b.events.animationEnd&&b.events.animationEnd.bind(b)(a)})},p=function(){var c=this._currentFrame,d=function(b,c){for(var d=[b,c],f=[],g=0;1>=g;g++){var j,k=this._getProperty(d[g]);for(j in k)-1==n(f,j)&&f.push(j)}this.elem.style[e("transitionDuration",i)]=0,d=this._getProperty(b);for(j in d)this.elem.style[j]=d[j];this.elem.style[e("transitionProperty",i)]=f.join(","),this.elem.style[e("transitionTimingFunction",i)]=a.timing,a.accelerate&&(this.elem.style[e("transform",h)]="translateZ(0)"),this.elem.offsetWidth,this.elem.style[e("transitionDuration",i)]=(c.point-b.point)/1e3+"s",f=this._getProperty(c);for(j in f)this.elem.style[j]=f[j]};if(1==this.keyframes.length){var f=this.keyframes[0];0<f.point&&this.keyframes.unshift({point:0})}if(1<this.keyframes.length){var f=this.keyframes[0],g=this.keyframes[1],j=e("transitionDelay",i);d.bind(this)(f,g),b._startOpt.delay&&(b.elem.style[j]=b._startOpt.delay),c++,l(this.elem,e("transitionend",i),function(a){if(!b.keyframes[c+1]&&1<b._startOpt.repeat&&(c=0,/number/i.test(typeof b._startOpt.repeat)&&b._startOpt.repeat--),b.keyframes[c+1]){a=b.keyframes[c];var e=b.keyframes[c+1];0!==b.elem.style[j]&&(b.elem.style[j]=0),d.bind(b)(a,e),c++}else b.events.animationEnd&&b.events.animationEnd.bind(b)(a)})}},q=function(){var a=0,d=this._startOpt.delay.replace?1*this._startOpt.delay.replace(/[^\.\d]/g,""):this._startOpt.delay,e=function(f,g){var h,i=[],j=this._getProperty(f),k=this._getProperty(g);for(h in j)if(null!=k[h]){if(/[\(\)]/.test(j[h]))return void console.error("time模式不支持这种样式:"+j[h]+"，请使用animation或者transition模式");var l=parseFloat(j[h].toString().replace(/[^\d+]/g,"")),m=parseFloat(k[h].toString().replace(/[^\d+]/g,""));i.push({prop:h,start:l,end:m,unit:("0"==k[h]?j[h]:k[h]).toString().replace(/[\D]*\d+(?=[a-z]*)/gi,"")})}var n=function(a){for(var b,c=0;b=i[c];c++)if(-1==a)/opacity/i.test(b.prop)&&(this.elem.style.filter="alpha(opacity="+100*b.end+")"),this.elem.style[b.prop]=b.end+b.unit;else{var d=(b.start+(b.end-b.start)*a).toFixed(1);/opacity/i.test(b.prop)&&(this.elem.style.filter="alpha(opacity="+100*d+")"),this.elem.style[b.prop]=d+b.unit}},p=function(){this.keyframes[a+1]?(e.bind(this)(this.keyframes[a],this.keyframes[a+1]),a++):1<this._startOpt.repeat?/number/i.test(typeof this._startOpt.repeat)&&(this._startOpt.repeat--,a=0,p.call(this)):b.events.animationEnd&&b.events.animationEnd.bind(b)()};n.bind(this)(0),1==this.keyframes.length&&(f=this.keyframes[0],0<f.point&&this.keyframes.unshift({point:0}));var q=g.point-f.point,r=0,s=function(){var a=(c.now?c.now():+new Date)-t-r;if(n.bind(b)(a/q),q>a)if(b._needStop){var d=c.now?c.now():+new Date;r=0,b._continueFunc=function(){r=(c.now?c.now():+new Date)-d,o(s)}}else o(s);else n.bind(b)(-1),p.bind(b)()},t=0;this._startOpt.delay&&!this._isDelayed?(c.now?t=c.now()+1e3*d:(j=new Date,t=+j.setMilliseconds(j.getMilliseconds()+1e3*d)),setTimeout(function(){b._isDelayed=!0,o(s)},1e3*d)):(t=c.now?c.now():+new Date,o(s))};this._currentFrame=a,e.bind(this)(this.keyframes[a],this.keyframes[a+1]),a++};if(a.method)switch(a.method){case"animation":this.options.animation?g.bind(this)():console.error("your browser does not support animation method.");break;case"transition":this.options.transition?p.bind(this)():console.error("your browser does not support transition method.");break;case"time":q.bind(this)()}else this.options.transition?p.bind(this)():this.options.animation?g.bind(this)():q.bind(this)();return this},clear:function(){for(var a=0,b=this.keyframes.length;b>a;a++){var c,d=this._getProperty(this.keyframes[a]);for(c in d)this.elem.style[c]=""}return this},on:function(a,b){return"animationend"==a?this.events.animationEnd=b:l(this.elem,a,b),this},stop:function(){return this._needStop=!0,this._currentFrame=0,this},pause:function(){return this._needStop=!0,this},continuePlay:function(){return 1==this._needStop&&(this._startOpt&&"time"==this._startOpt.method?(this._needStop=!1,this._continueFunc&&this._continueFunc(),this._continueFunc=null):(this._needStop=!1,this.clear(),this.start())),this}},a.Animate=d}(window);var Slider=function(){function a(a,b){b=b||{mode:0,duration:400},this._ol=a,this._lis=a.children,this._events={},this._isSliding=!1,this._index=1,this._config=g(b),this._aniOut=new window.Animate,this._aniIn=new window.Animate,this.isPaused=!1,h(this._config,this._ol),this._config.autoPlay!==!1&&this.play()}var b=function(a){return function(){for(var b,c=document.createElement("div").style,d=a.prefix.split(","),e=0,f=d.length;f>e;e++)if(b=d[e]+a.words,b in c)return d[e].substr(0,d[e].length-1);return!1}},c=function(a,b){var c=b();return""===c?a:(a=a.charAt(0)+a.substr(1),c+a)},d=b({prefix:"t,-webkit-t,-moz-t,-ms-t,-o-t",words:"ransform"}),e=d()===!1?!1:!0,f=c("transform",d),g=function(a){var b={};b.mode=a.mode||0,b.duration=a.duration||500,b.interval=a.interval||4e3,b.autoPlay=null!==a.autoPlay?a.autoPlay:!0,b.timingFunction=a.timingFunction||"linear",b.loop=null!=a.loop?a.loop:!0,b.nextSlideOffset=a.nextSlideOffset||.2,b.scale=a.scale||1;var c=a.origin||{},d=c.x||0,e=c.y||0;return b.origin={x:d,y:e},b},h=function(a,b){var c=b.children,d=b.clientWidth,e=b.clientHeight,g=0;if(a.mode<4){if(0===a.mode||1===a.mode){for(g=0;g<c.length;g++)c[g].style[f]="translateX("+g*d+"px) translateZ(0)",c[g].style.width=d+"px",c[g].style.height=b.style.height="100%";b.style.width=d*c.length+"px"}else{for(g=0;g<c.length;g++)c[g].style[f]="translateY("+g*e+"px) translateZ(0)",c[g].style.height=e+"px",c[g].style.width=b.style.width="100%";b.style.height=e*c.length+"px"}b.style[f]="translateZ(0)"}else{for(g=0;g<c.length;g++)c[g].removeAttribute("style");b.removeAttribute("style")}},i=a.prototype;i.on=function(a,b){if(!/string/i.test(typeof a))throw new TypeError("event must be string");if(!/function/i.test(typeof b))throw new TypeError("callback must be a function");return this._events[a]||(this._events[a]=[]),this._events[a].push(b),this},i.off=function(a,b){if(!/string/i.test(typeof a))throw new TypeError("event must be string");if(/function/i.test(typeof b)){if(this._events[a]){var c=this._events[a].indexOf(b);c>-1&&this._events[a].splice(c,1)}}else this._events[a]=null;return this},i.changeConfig=function(a){return this.pause(),this._config=g(a),this._destroyStyle(),h(this._config,this._ol),this._index=1,this},i._destroyStyle=function(){this.pause(),this._aniIn.elem&&this._aniIn.clear().reset(),this._aniOut.elem&&this._aniOut.clear().reset();for(var a=0;a<this._lis.length;a++)this._lis[a].removeAttribute("style");return this._ol.removeAttribute("style"),this},i.destroy=function(){this._destroyStyle(),this.isPaused=!1,this.isDestroyed=!0;for(var a in this._events)this.off(a);return this._ol.removeEventListener("touchstart"),this._ol.removeEventListener("touchmove"),this._ol.removeEventListener("touchend"),this},i.prefixCSS=function(a,b){var c=b();return""===c?a:(a=a.charAt(0)+a.substr(1),c+a)},i.pause=function(){return window.clearInterval(this._intervalKey),this._intervalKey=null,this.isPaused=!0,this},i.play=function(){var a=this;return a._config.autoPlay&&(window.clearInterval(a._intervalKey),a._intervalKey=setInterval(function(){a.next()},a._config.interval+a._config.duration)),this.isPaused=!1,this},i.supportTransform=e,i.transformCSS=f;var j,k,l,m,n={0:function(a,b,c){var d=a.children.length,g=a.children[0].clientWidth,h=0;if(b===d){for(h=0;d>h;h++)a.children[h].style[f]="translateX("+g*h+"px) translateZ(0)";a.children[0].style[f]="translateX("+g*d+"px) translateZ(0)"}else if(1===b)for(h=0;d>h;h++)a.children[h].style[f]="translateX("+g*h+"px) translateZ(0)";e?(j={point:0},j[f]="translateX("+g*(1-b)+"px) translateZ(0)",k={point:this._config.duration},k[f]="translateX("+g*(-b-c+1)+"px) translateZ(0)"):(j={point:0,left:g*(1-b)+"px"},k={point:this._config.duration,left:g*(-b-c+1)+"px"}),this._aniIn.keyframe([j,k])},1:function(a,b,c){var d=a.children.length,g=a.children[0].clientWidth,h=0;if(1===b){for(h=0;d>h;h++)a.children[h].style[f]="translateX("+g*h+"px) translateZ(0)";a.children[d-1].style[f]="translateX("+-g+"px) translateZ(0)"}else if(b===d)for(h=0;d>h;h++)a.children[h].style[f]="translateX("+g*h+"px) translateZ(0)";e?(j={point:0},j[f]="translateX("+g*(1-b)+"px) translateZ(0)",k={point:this._config.duration},k[f]="translateX("+g*(c+1-b)+"px) translateZ(0)"):(j={point:0,left:g*(1-b)+"px"},k={point:this._config.duration,left:g*(c+1-b)+"px"}),this._aniIn.keyframe([j,k])},2:function(a,b,c){var d=a.children.length,g=a.children[0].clientHeight,h=0;if(b===d){for(h=0;d>h;h++)a.children[h].style[f]="translateY("+g*h+"px) translateZ(0)";a.children[0].style[f]="translateY("+g*d+"px) translateZ(0)"}else if(1===b)for(h=0;d>h;h++)a.children[h].style[f]="translateY("+g*h+"px) translateZ(0)";e?(j={point:0},j[f]="translateY("+g*(1-b)+"px) translateZ(0)",k={point:this._config.duration},k[f]="translateY("+g*(-b-c+1)+"px) translateZ(0)"):(j={point:0,left:g*(1-b)+"px"},k={point:this._config.duration,left:g*-b+"px"}),this._aniIn.keyframe([j,k])},3:function(a,b,c){var d=a.children.length,g=a.children[0].clientHeight,h=0;if(1===b){for(h=0;d>h;h++)a.children[h].style[f]="translateY("+g*h+"px) translateZ(0)";a.children[d-1].style[f]="translateY("+-g+"px) translateZ(0)"}else if(b===d)for(h=0;d>h;h++)a.children[h].style[f]="translateY("+g*h+"px) translateZ(0)";e?(j={point:0},j[f]="translateY("+g*(1-b)+"px) translateZ(0)",k={point:this._config.duration},k[f]="translateY("+g*(c+1-b)+"px) translateZ(0)"):(j={point:0,left:g*(1-b)+"px"},k={point:this._config.duration,left:g*(2-b)+"px"}),this._aniIn.keyframe([j,k])},4:function(){this._aniIn.keyframe({point:0,opacity:0}).keyframe({point:this._config.duration,opacity:1}),this._aniOut.keyframe({point:0,opacity:1}).keyframe({point:this._config.duration,opacity:0})},5:function(a,b){var c=b.clientHeight/2;(5===this._config.mode||6===this._config.mode)&&(this._ol.style.webkitPerspective="1560px",this._ol.style.webkitTransformStyle="preserve-3d",this._ol.style.webkitTransform="scale("+this._config.scale+")",this._ol.style.overflow="visible"),j={point:0},j[f]="rotateX(90deg) translateZ("+c+"px)",k={point:this._config.duration},k[f]="rotateX(0deg) translateZ("+c+"px)",this._aniIn.keyframe([j,k]),l={point:0},l[f]="rotateX(0deg) translateZ("+c+"px)",m={point:this._config.duration},m[f]="rotateX(-90deg) translateZ("+c+"px)",this._aniOut.keyframe([l,m])},6:function(a,b){var c=b.clientHeight/2;(5===this._config.mode||6===this._config.mode)&&(this._ol.style.webkitPerspective="1560px",this._ol.style.webkitTransformStyle="preserve-3d",this._ol.style.webkitTransform="scale("+this._config.scale+")",this._ol.style.overflow="visible"),j={point:0},j[f]="rotateX(-90deg) translateZ("+c+"px)",k={point:this._config.duration},k[f]="rotateX(0deg) translateZ("+c+"px)",this._aniIn.keyframe([j,k]),l={point:0},l[f]="rotateX(0deg) translateZ("+c+"px)",m={point:this._config.duration},m[f]="rotateX(90deg) translateZ("+c+"px)",this._aniOut.keyframe([l,m])}},o={0:1,1:0,2:3,3:2,4:4,5:6,6:5},p=function(a){if(this._isSliding)return this;a=a||1;var b=n[this._config.mode],c=null,d=null;this._config.mode<4?(c=this._ol,this._config.loop||this._index!==this._lis.length||(c=null)):(c=this._lis[this._lis.length-a-this._index],this._config.loop&&this._index===this._lis.length&&(c=this._lis[this._lis.length-1]),d=this._lis[this._lis.length-this._index]);var e=this;if(c){if(this._aniIn.setElement(c),this._aniIn.resetKeyFrames(),d){this._aniOut.setElement(d),this._aniOut.resetKeyFrames(),b.call(this,c,d),c.style.visibility=d.style.visibility="visible";for(var f=0;f<this._lis.length;f++)this._lis[f]!==c&&this._lis[f]!==d&&(this._lis[f].style.visibility="hidden")}else b.call(this,c,this._index,a);this._aniIn.start({timing:this._config.timing}),this._aniOut.start({timing:this._config.timing}),this._isSliding=!0;var g=setTimeout(function(){e._isSliding=!1,clearTimeout(g),e._aniIn.reset(),d&&e._aniOut.reset(),e._index+=a,e._index>e._lis.length&&(e._index=1),e._events.slideend&&e._events.slideend.forEach(function(a){a&&a(e._index,"next")})},this._config.duration+80);e._events.slidestart&&e._events.slidestart.forEach(function(a){a&&a(e._index,"next")})}};return i.prev=function(a){if(this._isSliding)return this;a=a||1;var b=this,c=o[this._config.mode],d=n[c],e=null,f=null;if(this._config.mode<4)e=this._ol,this._config.loop||1!==this._index||(e=null);else{e=this._lis[this._lis.length-this._index+a],this._config.loop&&1===this._index&&(e=this._lis[0]),f=this._lis[this._lis.length-this._index],e.style.visibility=f.style.visibility="visible";for(var g=0;g<this._lis.length;g++)this._lis[g]!==e&&this._lis[g]!==f&&(this._lis[g].style.visibility="hidden")}if(e){this._aniIn.setElement(e),this._aniIn.resetKeyFrames(),f?(this._aniOut.setElement(f),this._aniOut.resetKeyFrames(),d.call(this,e,f)):d.call(this,e,this._index,a),this._aniIn.start({timing:this._config.timing}),this._aniOut.start({timing:this._config.timing}),this._isSliding=!0;var h=setTimeout(function(){b._isSliding=!1,clearTimeout(h),b._aniIn.reset(),f&&b._aniOut.reset(),b._index-=a,b._index<1&&(b._index=b._lis.length),b._events.slideend&&b._events.slideend.forEach(function(a){a&&a(b._index,"prev")})},this._config.duration+80);b._events.slidestart&&b._events.slidestart.forEach(function(a){a&&a(b._index,"prev")})}return this},i.next=function(a){return p.call(this,a),this},i.slideTo=function(a){if(!this.isPaused){if(a=1*a,a>0&&a<=this._lis.length){var b=a-this._index;if(this.pause(),b>0)this.next(b);else{if(!(0>b))return this.isPaused=!1,this;this.prev(-b)}}var c=this,d=function(){c.play().off("slideend",d)};this.on("slideend",d)}return this},a}();